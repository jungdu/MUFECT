# 3. 시각화 원리 (Visualization)

데이터를 얻었다면 이제 그릴 차례입니다. `0`부터 `255` 사이의 숫자로 들어오는 주파수 데이터를 어떻게 멋진 영상으로 바꾸는지 설명합니다.

## 1. 데이터의 형태

`AnalyserNode`에서 데이터를 가져오면 `Uint8Array`라는 배열(리스트)을 줍니다.
- 길이: 1024개 (fftSize의 절반)
- 값: 0 (소리 없음) ~ 255 (최대 크기)
- 순서: 배열의 앞쪽은 **저음(Bass)**, 뒤쪽은 **고음(Treble)**입니다.

```
Index:  [0, 1, 2, ... , 100, ... , 1023]
Sound:  [저음 --------> 중음 --------> 고음]
Value:  [255, 240, ... , 120, ... , 0  ]
```

## 2. 그리기 과정 (Rendering Loop)

영상은 1초에 60장의 그림을 빠르게 보여주는 것입니다(60 FPS). 우리는 매 프레임마다 다음 과정을 반복합니다.

1. **지우기**: 캔버스(화면)를 깨끗하게 지웁니다.
2. **데이터 가져오기**: 현재 순간의 주파수 데이터를 가져옵니다.
3. **그리기**:
    - 예를 들어 막대형 시각화(Bar Visualizer)라면, 반복문을 돌면서 1024개의 막대를 그립니다.
    - 막대의 **높이** = 데이터 값 (0~255)
    - 막대의 **색상** = 사용자가 설정한 색상
    - 막대의 **위치** = 인덱스(순서)에 따라 왼쪽에서 오른쪽으로 배치

## 3. 원형 시각화 (Circular Visualizer)

단순한 막대 말고 원형으로 퍼지는 효과는 어떻게 만들까요? 삼각함수(sin, cos)를 사용합니다.

- **각도**: 360도를 데이터 개수(예: 100개만 사용)로 나눕니다.
- **반지름**: `기본 원 크기 + 소리 크기` 가 됩니다.
- 소리가 클수록 원의 중심에서 더 멀리 점을 찍거나 선을 그어, 마치 스피커가 쿵쿵거리는 듯한 효과를 냅니다.

## 4. 반응형 효과 (Reactivity)

단순히 그래프만 그리는 것이 아니라, 소리에 반응하는 느낌을 주기 위해 "저음(Bass)" 영역의 평균값을 따로 계산합니다.
- 저음이 쿵! 할 때마다 전체 화면을 살짝 밝게 하거나,
- 로고 이미지를 1.1배 확대했다가 줄어들게 하는 등
- "비트감"을 시각적으로 표현하는 기술들이 추가됩니다.
